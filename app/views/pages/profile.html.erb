<div id="profile"><h1 >Profile</h1></div>


<div class ="dashcontainer">

  <div class ="user-info">
        <%= cl_image_tag current_user.photo.key, class: "avatar-square", alt: "avatar-square" %>
      <p id="host-name"><%= current_user.first_name.capitalize %> <%= current_user.last_name.capitalize %></p>
  </div>

  <div class ="bookings">
      <h2>My bookings</h2>
      <% if @bookings %>
        <% @bookings.each do |booking| %>
           <ul>
              <li><strong>Adresse:</strong> <%= booking.parking.address%> </li>
              <li><strong>Arrival:</strong> <%= booking.arrival%></li>
              <li><strong>Depart:</strong>  <%= booking.depart%></li>
            </ul>
          <% end %>
      <% else %>
      <p>you do not have any booking yet</p>
      <% end %>
  </div>

  <div class ="parkings">
  <h2>My Parkings</h2>
       <% if @parkings %>
          <% @parkings.each do |parking| %>
            <%=  link_to parking_path(parking), class: "link-to-show" do%>
            <div class="card-product">
              <%= cl_image_tag parking.photos.first.key, width:200 %>
              <div class="card-product-infos">
                <h2><%= parking.address %></h2>
                <p> <%= parking.description.capitalize %> (<%= parking.width %>cm wide, <%= parking.height %>cm tall, and <%= parking.length %>cm long.)</p>
                <p>Availability: <%= parking.availability_date %></p>
              </div>
            </div>
            <%parking.bookings.each do |booking_by_parking|%>
              <div class="booking-parking" style="background-color: white; margin-bottom:4px">
                <h2> One booking by <%=booking_by_parking.user.first_name%> <%=booking_by_parking.user.last_name%> </h2>
                <p>for the <%=booking_by_parking.arrival%> until <%=booking_by_parking.depart%> </p>
                <%# <%=booking_by_parking.user.photo.key%>
                <%if booking_by_parking.confirmation == false %>
                  <%=link_to "Validate the booking", validate_booking_path(booking_by_parking), data: {turbo_method: :patch}, class:"btn btn-primary" %>
                <%end%>
              </div>
            <%end%>


          <% end %>
         <%end%>
        <% else %>
           <p>you do not have any Parking yet</p>
        <% end %>
  </div>

</div>
